<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>e.nue Dashboard</title>

<style>
:root{
  --bg1:#e3ddd4;
  --bg2:#d4ccc1;

  --glass-bg: rgba(255,255,255,.86);
  --glass-bg2: rgba(255,255,255,.78);
  --glass-border: rgba(0,0,0,.06);
  --line-soft: rgba(0,0,0,.10);
  --shadow: 0 18px 45px rgba(0,0,0,.14);

  --text-main:#222222;
  --text-sub:#555555;
  --muted: rgba(34,34,34,.55);

  --accent:#e18a6a;
  --accent2:#d06463;

  --ok:#2fbf7a;
  --wait:#f0a33a;
  --done:#6d78d8;
  --todo:#9097a6;

  --r:18px;
  --maxw:980px;
}

*{ box-sizing:border-box; }

html, body{ height:100%; }

body{
  margin:0;
  font-family: system-ui,-apple-system,"Segoe UI","Noto Sans JP",sans-serif;
  color:var(--text-main);
  background:
    radial-gradient(1200px 800px at 18% 8%, rgba(225,138,106,.18), transparent 55%),
    radial-gradient(1200px 800px at 88% 0%, rgba(208,100,99,.14), transparent 52%),
    linear-gradient(135deg,var(--bg1),var(--bg2));
}

.safe{
  padding:max(14px,env(safe-area-inset-top)) 14px max(18px,env(safe-area-inset-bottom));
  max-width:var(--maxw);
  margin:0 auto;
}

/* ===== top bar ===== */
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:6px 0 14px;
}
.brand{ font-weight:900; letter-spacing:.02em; }

.tabs{
  display:flex; gap:4px; padding:4px;
  border-radius:999px;
  background:rgba(255,255,255,.55);
  border:1px solid var(--glass-border);
  box-shadow:var(--shadow);
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
}
.tab{
  border:0; background:transparent;
  padding:10px 14px; border-radius:999px;
  font-weight:800; cursor:pointer;
  color:rgba(34,34,34,.65);
}
.tab.active{
  background:rgba(255,255,255,.85);
  color:var(--text-main);
  box-shadow:0 8px 18px rgba(0,0,0,.08);
}

/* ===== layout ===== */
.grid{ display:flex; flex-direction:column; gap:14px; }

.card{
  background:linear-gradient(180deg,var(--glass-bg),var(--glass-bg2));
  border:1px solid var(--glass-border);
  border-radius:var(--r);
  box-shadow:var(--shadow);
  overflow:hidden;
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
}

/* =====================================================
   flip cardï¼ˆé«˜ã•ç¢ºä¿ï¼‹ãƒãƒ©è¦‹ãˆé˜²æ­¢ï¼‹Safariå®‰å®šï¼‰
===================================================== */
.cardFlip{ perspective:1200px; }
.cardFlipInner{
  display:grid;
  transform-style:preserve-3d;
  transition:transform .55s cubic-bezier(.22,.9,.22,1);
  will-change:transform;
  transform: translateZ(0);
  min-height: 360px;
}
.cardFlip.is-flipped .cardFlipInner{ transform:rotateY(180deg) translateZ(0); }

.cardFace{
  grid-area: 1 / 1;
  backface-visibility:hidden;
  -webkit-backface-visibility:hidden;
  background: linear-gradient(180deg,var(--glass-bg),var(--glass-bg2));
  transform: translateZ(0);
  height: 100%;
  overflow: hidden;
}

.cardFace.front{ transform:rotateY(0deg) translateZ(0); }
.cardFace.back { transform:rotateY(180deg) translateZ(0); }

/* ===== card head ===== */
.cardHead{
  display:flex; justify-content:space-between;
  gap:10px;
  padding:14px 14px 10px;
  border-bottom:1px solid rgba(0,0,0,.06);
}
.title .h{ font-weight:900; font-size:14px; letter-spacing:.06em; }
.title .s{ font-size:12px; color:rgba(34,34,34,.6); }
.badgeBig{ text-align:right; }
.badgeBig .k{ font-size:11px; font-weight:800; color:rgba(34,34,34,.55); }
.badgeBig .v{ font-size:18px; font-weight:900; }

/* ===== chart ===== */
.chartWrap{ 
    padding:12px 0;
    overflow: hidden;
 }
.chartFrame{ position:relative; padding:0 12px 10px; }

.yAxisFixed{
  position:absolute; left:12px; top:0;
  width:42px; height:220px;
  pointer-events:none;
  z-index:2;
}

/* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é ˜åŸŸï¼ˆã“ã“ã‚’è§¦ã£ã¦ã‚‚ flip ã—ãªã„ï¼‰ */
.chartScroller{
  overflow-x:auto; overflow-y:hidden;
  -webkit-overflow-scrolling:touch;
  touch-action: pan-x;
  overscroll-behavior: contain;
}

.chartInner{ padding-left:42px; }

.hint{ padding:0 14px 14px; font-size:12px; color:rgba(34,34,34,.55); }
.tapHint{
  display:inline-flex; gap:8px; align-items:center;
  padding:8px 10px; border-radius:999px;
  background:rgba(255,255,255,.62);
  border:1px solid rgba(0,0,0,.06);
  cursor:pointer;
  user-select:none;
  -webkit-user-select:none;
}

/* ===== calendar ===== */
.calendar{ padding:12px; }

.calBox{
  position:relative; border-radius:14px; overflow:hidden;
  border:1px solid rgba(0,0,0,.08);
  background:linear-gradient(180deg,rgba(255,255,255,.7),rgba(255,255,255,.52));
}

.calBg{
  position:absolute; inset:0;
  background:
    radial-gradient(600px 360px at 20% 20%, rgba(255,255,255,.55), transparent 60%),
    radial-gradient(600px 420px at 80% 30%, rgba(225,138,106,.22), transparent 60%);
}

.calGlass{
  position:relative;
  padding:10px;
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
}

.calTop{ display:flex; justify-content:space-between; padding:6px 4px 10px; font-weight:900; }

.calGrid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:1px;
  background:rgba(0,0,0,.08);
  border-radius:12px;
  overflow:hidden;
}

.dow,.day{ min-height:46px; padding:6px; font-size:12px; background:rgba(255,255,255,.45); }
.dow{ text-align:center; font-weight:900; background:rgba(255,255,255,.65); }
.day{ position:relative; }

.num{ position:absolute; top:6px; left:6px; font-weight:900; }

.pill{
  display:inline-block;
  margin-top:18px; padding:4px 8px; border-radius:999px;
  font-size:11px; font-weight:900;
  background:rgba(255,255,255,.75);
  border:1px solid rgba(0,0,0,.06);
}
.pill.accent{
  color:#fff;
  background:linear-gradient(180deg,rgba(225,138,106,.95),rgba(208,100,99,.92));
}
/* â˜… æœªå®šç¾©ã ã£ãŸ soft ã‚’è¿½åŠ  */
.pill.soft{
  color:rgba(34,34,34,.72);
  background:rgba(255,255,255,.68);
}

/* ===== table ===== */
.listTitle{ padding:12px 14px 6px; font-weight:900; }
.list{ padding:10px 12px 12px; }

.tableWrap{
  overflow:auto;
  -webkit-overflow-scrolling:touch;
  touch-action: pan-x pan-y;
  border-radius:14px;
}

.table{
  width:100%; min-width:520px;
  border-collapse:separate; border-spacing:0;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.08);
  background:rgba(255,255,255,.55);
}

.thead th{
  position:sticky; top:0;
  padding:10px;
  font-size:12px; font-weight:900;
  background:rgba(255,255,255,.7);
  z-index:1;
}

.row td{
  padding:10px;
  border-bottom:1px solid rgba(0,0,0,.06);
}

.status{
  display:inline-flex; gap:8px; align-items:center;
  padding:6px 10px;
  border-radius:999px;
  font-size:12px; font-weight:900;
  background:rgba(255,255,255,.68);
}

.dot{ width:10px; height:10px; border-radius:999px; }
.st-doing .dot{ background:var(--ok); }
.st-wait  .dot{ background:var(--wait); }
.st-done  .dot{ background:var(--done); }
/* â˜… æœªå®šç¾©ã ã£ãŸ todo ã‚’è¿½åŠ  */
.st-todo  .dot{ background:var(--todo); }

/* motionè»½æ¸› */
@media (prefers-reduced-motion: reduce){
  .cardFlipInner{ transition:none; }
}
</style>
</head>

<body>
  <div class="safe">
    <div class="topbar">
      <div class="brand">e.nue</div>
      <div class="tabs" role="tablist" aria-label="page switch">
        <button class="tab active" data-view="home" type="button">HOME</button>
        <button class="tab" data-view="other" type="button">OTHER</button>
      </div>
    </div>

    <!-- HOME -->
    <main id="view-home" class="grid">

      <!-- 1) ã‚°ãƒ©ãƒ•ï¼ˆflipï¼‰ -->
      <section class="card cardFlip" id="card-chart">
        <div class="cardFlipInner" id="cardFlipInner">

          <!-- FRONT -->
          <div class="cardFace front">
            <div class="cardHead">
              <div class="title">
                <div class="h" id="chartTitleA">å—æ³¨ä»¶æ•°ã®æ¨ç§»</div>
                <div class="s">æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼šéå»1å¹´åˆ†ï¼ˆè¡¨ç¤ºä¸­ç¯„å›²ã§ç¸¦è»¸ãŒè‡ªå‹•èª¿æ•´ï¼‰</div>
              </div>
              <div class="badgeBig">
                <div class="k" id="metricLabelA">å—æ³¨ä»¶æ•°</div>
                <div class="v" id="metricValueA">â€”</div>
              </div>
            </div>

            <div class="chartWrap">
              <div class="chartFrame">
                <div class="yAxisFixed" id="yAxisFixedA"></div>
                <div class="chartScroller" id="chartScrollerA">
                  <div class="chartInner" id="chartMountA"></div>
                </div>
              </div>
              <div class="hint">
                <span class="tapHint" id="flipHintA">ğŸ‘† ã‚¿ãƒƒãƒ—ã§ã€Œç·è³‡ç”£ã®æ¨ç§»ã€ã«åˆ‡æ›¿ï¼ˆå›è»¢ï¼‰</span>
              </div>
            </div>
          </div>

          <!-- BACK -->
          <div class="cardFace back">
            <div class="cardHead">
              <div class="title">
                <div class="h" id="chartTitleB">ç·è³‡ç”£ã®æ¨ç§»</div>
                <div class="s">æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼šéå»1å¹´åˆ†ï¼ˆè¡¨ç¤ºä¸­ç¯„å›²ã§ç¸¦è»¸ãŒè‡ªå‹•èª¿æ•´ï¼‰</div>
              </div>
              <div class="badgeBig">
                <div class="k" id="metricLabelB">ç·è³‡ç”£</div>
                <div class="v" id="metricValueB">â€”</div>
              </div>
            </div>

            <div class="chartWrap">
              <div class="chartFrame">
                <div class="yAxisFixed" id="yAxisFixedB"></div>
                <div class="chartScroller" id="chartScrollerB">
                  <div class="chartInner" id="chartMountB"></div>
                </div>
              </div>
              <div class="hint">
                <span class="tapHint" id="flipHintB">ğŸ‘† ã‚¿ãƒƒãƒ—ã§ã€Œå—æ³¨ä»¶æ•°ã®æ¨ç§»ã€ã«åˆ‡æ›¿ï¼ˆå›è»¢ï¼‰</span>
              </div>
            </div>
          </div>

        </div>
      </section>

      <!-- 2) ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ  -->
      <section class="card">
        <div class="cardHead">
          <div class="title">
            <div class="h">ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</div>
            <div class="s">è¦‹ãŸç›®ã®ã¿ï¼ˆå…¥ã‚Œæ–¹ã¯æŒ‡ç¤ºå¾…ã¡ï¼‰</div>
          </div>
          <div class="badgeBig">
            <div class="k">ä»Šæœˆ</div>
            <div class="v" id="calMonthLabel">â€”</div>
          </div>
        </div>

        <div class="calendar">
          <div class="calBox">
            <div class="calBg"></div>
            <div class="calGlass">
              <div class="calTop">
                <div class="month" id="calTitle">â€”</div>
                <div style="font-size:12px;color:rgba(34,34,34,.60);font-weight:900;">Sunâ€“Sat</div>
              </div>

              <div class="calGrid" id="calGrid"></div>

              <div style="padding:10px 4px 0;color:rgba(34,34,34,.55);font-size:11px;">
                â€» å¹´æœ«å¹´å§‹ä¼‘ã¿ãªã©ã®æ³¨æ„æ›¸ãã‚‚ã“ã“ã«ç½®ã‘ã‚‹æƒ³å®š
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 3) å—æ³¨æ®‹ï¼šstock -->
      <section class="card">
        <div class="listTitle">å—æ³¨æ®‹ï¼šstock</div>
        <div class="list">
          <div class="tableWrap">
            <table class="table" aria-label="stock orders">
              <thead class="thead">
                <tr>
                  <th style="width:46%;">åå‰</th>
                  <th style="width:26%;">æœŸæ—¥</th>
                  <th style="width:18%;">é€²æ—</th>
                  <th style="width:10%; text-align:right;">æ‹…å½“</th>
                </tr>
              </thead>
              <tbody id="stockBody"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- 4) å—æ³¨æ®‹ï¼šorder -->
      <section class="card">
        <div class="listTitle">å—æ³¨æ®‹ï¼šorder</div>
        <div class="list">
          <div class="tableWrap">
            <table class="table" aria-label="made-to-order">
              <thead class="thead">
                <tr>
                  <th style="width:46%;">åå‰</th>
                  <th style="width:26%;">æœŸæ—¥</th>
                  <th style="width:18%;">é€²æ—</th>
                  <th style="width:10%; text-align:right;">æ‹…å½“</th>
                </tr>
              </thead>
              <tbody id="orderBody"></tbody>
            </table>
          </div>
        </div>
      </section>

    </main>

    <!-- OTHER -->
    <main id="view-other" class="grid" style="display:none;">
      <section class="card">
        <div class="cardHead">
          <div class="title">
            <div class="h">OTHER</div>
            <div class="s">ã“ã“ã¯å¾Œã§å¢—ã‚„ã™</div>
          </div>
        </div>
        <div style="padding:14px;color:rgba(34,34,34,.65);">æº–å‚™ä¸­â€¦</div>
      </section>
    </main>
  </div>

<script>
(()=> {
  /* ===== ç”»é¢åˆ‡æ›¿ ===== */
  const tabs = document.querySelectorAll(".tab");
  const viewHome = document.getElementById("view-home");
  const viewOther = document.getElementById("view-other");

  tabs.forEach(btn=>{
    btn.addEventListener("click", ()=>{
      tabs.forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      const v = btn.dataset.view;
      viewHome.style.display = (v==="home") ? "" : "none";
      viewOther.style.display = (v==="other") ? "" : "none";
    });
  });

  /* ===== ãƒ‡ãƒ¼ã‚¿ ===== */
  const months = ["9æœˆ","10æœˆ","11æœˆ","12æœˆ","1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ"];
  const orders = [3,6,9,7,8,12,10,14,9,6,11,15];
  const assets = [80000,120000,150000,180000,210000,190000,240000,260000,300000,280000,320000,360000];

  /* ===== flipè¦ç´  ===== */
  const cardChart = document.getElementById("card-chart");
  const flipHintA = document.getElementById("flipHintA");
  const flipHintB = document.getElementById("flipHintB");

  /* ===== FRONT elems ===== */
  const A = {
    chartMount: document.getElementById("chartMountA"),
    yAxisFixed: document.getElementById("yAxisFixedA"),
    scroller:   document.getElementById("chartScrollerA"),
    title:      document.getElementById("chartTitleA"),
    metricLabel:document.getElementById("metricLabelA"),
    metricValue:document.getElementById("metricValueA"),
  };

  /* ===== BACK elems ===== */
  const B = {
    chartMount: document.getElementById("chartMountB"),
    yAxisFixed: document.getElementById("yAxisFixedB"),
    scroller:   document.getElementById("chartScrollerB"),
    title:      document.getElementById("chartTitleB"),
    metricLabel:document.getElementById("metricLabelB"),
    metricValue:document.getElementById("metricValueB"),
  };

  let isFlipped = false;      // false=front(A), true=back(B)
  let rafA = 0, rafB = 0;

  /* ===== utils ===== */
  const clamp = (n,a,b)=>Math.max(a,Math.min(b,n));
  const formatJPY = n => "Â¥" + Math.round(n).toLocaleString("ja-JP");
  const down5 = v => Math.floor(v/5)*5;
  const up5   = v => Math.ceil(v/5)*5;

  function getVisibleRange(scroller, {padL,xStep,N}){
    const sl = scroller.scrollLeft;
    const vw = scroller.clientWidth;
    const s  = Math.floor((sl-padL)/xStep);
    const e  = Math.ceil(((sl+vw)-padL)/xStep);
    return [clamp(s,0,N-1), clamp(e,0,N-1)];
  }

  function computeScale(series,i0,i1,isOrders){
    const slice = series.slice(i0,i1+1);
    let minV = Math.min(...slice);
    let maxV = Math.max(...slice);

    const range = (maxV-minV) || 1;
    const pad = range*0.05;

    let minS = minV - pad;
    let maxS = maxV + pad;

    if(isOrders){
      minS = down5(minS);
      maxS = up5(maxS);
      if(maxS - minS < 20) maxS = minS + 20;
    }else{
      minS = Math.floor(minS/10000)*10000;
      maxS = Math.ceil(maxS/10000)*10000;
    }
    if(maxS === minS) maxS = minS + (isOrders ? 20 : 10000);
    return {minS,maxS};
  }

  function makeTicks(minS,maxS,steps=5){
    const arr=[];
    const d=(maxS-minS)/(steps-1);
    for(let i=0;i<steps;i++) arr.push(minS + d*i);
    arr[0]=minS; arr[arr.length-1]=maxS;
    return arr;
  }

  function labelFor(v,isOrders){
    return isOrders ? `${Math.round(v)}` : `${Math.round(v/10000)}ä¸‡`;
  }

  function renderYAxis(elems, {ticks,yToPx,H,isOrders}){
    elems.yAxisFixed.innerHTML = `
      <svg width="42" height="${H}">
        ${ticks.map(v=>{
          const y=yToPx(v);
          return `<text x="34" y="${y+4}" text-anchor="end"
            font-size="11" fill="rgba(34,34,34,.55)" font-weight="900">
            ${labelFor(v,isOrders)}
          </text>`;
        }).join("")}
      </svg>
    `;
  }

  /* ===== æç”»ï¼ˆé¢ã”ã¨ï¼‰ ===== */
  function renderChartInto(elems, mode, {keepScroll=true} = {}){
    const isOrders = (mode === "orders");
    const series = isOrders ? orders : assets;

    const N=series.length;
    const xStep=96;
    const H=220;
    const padT=14, padB=42, padR=16;
    const innerH=H-padT-padB;
    const W=16 + xStep*(N-1) + padR;

    elems.chartMount.style.width = `${42+W}px`;
    const prevSL = elems.scroller.scrollLeft;

    const [i0,i1] = getVisibleRange(elems.scroller, {padL:42, xStep, N});
    const {minS,maxS} = computeScale(series,i0,i1,isOrders);
    const ticks = makeTicks(minS,maxS,5);

    const latest=series[N-1];
    elems.title.textContent       = isOrders ? "å—æ³¨ä»¶æ•°ã®æ¨ç§»" : "ç·è³‡ç”£ã®æ¨ç§»";
    elems.metricLabel.textContent = isOrders ? "å—æ³¨ä»¶æ•°" : "ç·è³‡ç”£";
    elems.metricValue.textContent = isOrders ? `${latest}ä»¶` : formatJPY(latest);

    const denom = (maxS - minS) || 1;
    const yToPx = v => padT + (1 - (v - minS) / denom) * innerH;

    renderYAxis(elems, {ticks,yToPx,H,isOrders});

    const pts = series.map((v,i)=>({x:42+i*xStep, y:yToPx(v)}));
    const path = pts.map((p,i)=> i ? `L ${p.x},${p.y}` : `M ${p.x},${p.y}`).join(" ");

    elems.chartMount.innerHTML = `
      <svg width="${42+W}" height="${H}">
        ${ticks.map(v=>{
          const y=yToPx(v);
          return `<line x1="42" y1="${y}" x2="${42+W-padR}" y2="${y}" stroke="rgba(0,0,0,.10)"/>`;
        }).join("")}

        <path d="${path} L ${pts.at(-1).x},${padT+innerH} L ${pts[0].x},${padT+innerH} Z"
              fill="rgba(225,138,106,.18)"/>

        <path d="${path}" fill="none" stroke="rgba(225,138,106,.95)"
              stroke-width="3" stroke-linecap="round"/>

        ${pts.map(p=>`
          <circle cx="${p.x}" cy="${p.y}" r="5"
            fill="rgba(255,255,255,.95)" stroke="rgba(34,34,34,.28)" stroke-width="2"/>
        `).join("")}

        ${months.map((m,i)=>`
          <text x="${42+i*xStep}" y="${H-18}" text-anchor="middle"
            font-size="12" fill="rgba(34,34,34,.65)" font-weight="900">${m}</text>
        `).join("")}
      </svg>
    `;

    elems.scroller.scrollLeft = keepScroll ? prevSL : elems.scroller.scrollWidth;
  }

  /* ===== ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¿½å¾“ï¼ˆé¢ã”ã¨ï¼‰ ===== */
  A.scroller.addEventListener("scroll", ()=>{
    if(rafA) return;
    rafA = requestAnimationFrame(()=>{
      rafA=0;
      if(!isFlipped) renderChartInto(A, "orders", {keepScroll:true});
    });
  });

  B.scroller.addEventListener("scroll", ()=>{
    if(rafB) return;
    rafB = requestAnimationFrame(()=>{
      rafB=0;
      if(isFlipped) renderChartInto(B, "assets", {keepScroll:true});
    });
  });

  /* â˜… ã“ã“é‡è¦ï¼šã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ“ä½œãŒ flip ã«ä¼æ’­ã—ãªã„ */
  [A.scroller, B.scroller].forEach(el=>{
    el.addEventListener("click", (e)=> e.stopPropagation(), {passive:true});
    el.addEventListener("pointerdown", (e)=> e.stopPropagation(), {passive:true});
    el.addEventListener("touchstart", (e)=> e.stopPropagation(), {passive:true});
  });

  /* ===== åˆæœŸæç”»ï¼ˆä¸¡é¢å…ˆã«ä½œã‚‹ï¼‰ ===== */
  renderChartInto(A, "orders", {keepScroll:false});
  renderChartInto(B, "assets", {keepScroll:false});

  /* ===== flipï¼ˆã‚«ãƒ¼ãƒ‰å…¨ä½“ã‚¯ãƒªãƒƒã‚¯ã§ã‚‚OKã ãŒã€èª¤ä½œå‹•ã—ãªã„ã‚ˆã†ä¸Šã§æ­¢ã‚ã¦ã‚‹ï¼‰ ===== */
  function flip(){
    isFlipped = !isFlipped;
    cardChart.classList.toggle("is-flipped", isFlipped);
  }

  cardChart.addEventListener("click", flip);
  flipHintA.addEventListener("click", (e)=>{ e.stopPropagation(); flip(); });
  flipHintB.addEventListener("click", (e)=>{ e.stopPropagation(); flip(); });

  /* ===== ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æç”» ===== */
  const calMonthLabel = document.getElementById("calMonthLabel");
  const calTitle = document.getElementById("calTitle");
  const calGrid = document.getElementById("calGrid");

  const calYear = 2025, calMonth = 12;
  calMonthLabel.textContent = `${calMonth}æœˆ`;
  calTitle.textContent = `${calYear}.${String(calMonth).padStart(2,"0")}`;

  const dows = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
  calGrid.innerHTML = dows.map(d=>`<div class="dow">${d}</div>`).join("");

  const first = new Date(calYear, calMonth-1, 1);
  const firstDow = first.getDay();
  const lastDay = new Date(calYear, calMonth, 0).getDate();

  const events = {
    10: [{t:"POP UP", style:"accent"}],
    11: [{t:"POP UP", style:"accent"}],
    12: [{t:"ãƒ¬ã‚¤ãƒ³ãƒœãƒ¼å€‰åº«", style:"soft"}],
    20: [{t:"storyè²©å£²", style:"accent"}],
    27: [{t:"å®šä¼‘æ—¥", style:"soft"}],
    31: [{t:"å®šä¼‘æ—¥", style:"soft"}],
  };

  const totalCells = 42;
  for(let i=0;i<totalCells;i++){
    const dayNum = i - firstDow + 1;
    if(dayNum < 1 || dayNum > lastDay){
      calGrid.insertAdjacentHTML("beforeend", `<div class="day" style="opacity:.35;"></div>`);
    }else{
      const ev = events[dayNum] || [];
      const pills = ev.map(e=>`<span class="pill ${e.style}">${e.t}</span>`).join("");
      calGrid.insertAdjacentHTML("beforeend", `
        <div class="day">
          <div class="num">${dayNum}</div>
          ${pills}
        </div>
      `);
    }
  }

  /* ===== ãƒ†ãƒ¼ãƒ–ãƒ«æç”»ï¼ˆstock / orderï¼‰ ===== */
  const stockBody = document.getElementById("stockBody");
  const orderBody = document.getElementById("orderBody");

  const stockRows = [
    {name:"ä¸‹é§„ç®±æ¨™æº–PB", due:"2025/06/19", status:"é€²è¡Œä¸­", st:"doing", assignees:["å·åŸ"]},
    {name:"å”è­°ç”¨å›³é¢ä½œæˆ", due:"2025/07/24", status:"é€²è¡Œä¸­", st:"doing", assignees:["è—¤åŸ","å·åŸ"]},
    {name:"å¤–å£ã‚µãƒ³ãƒ—ãƒ«å…¨é›†ã‚", due:"2025/07/31", status:"å¾…ã¡", st:"wait", assignees:["è—¤åŸ"]},
    {name:"å¿˜å¹´ä¼š", due:"2025/12/20", status:"é€²è¡Œä¸­", st:"doing", assignees:["å·åŸ"]},
  ];

  const orderRows = [
    {name:"ã‚ªãƒ¼ãƒ€ãƒ¼ï¼šãƒãƒ–ãƒ¼ã‚·ãƒ¥ã‚«A", due:"2025/06/28", status:"æœªç€æ‰‹", st:"todo", assignees:["è—¤åŸ"]},
    {name:"ã‚ªãƒ¼ãƒ€ãƒ¼ï¼šãƒ‰ãƒ¬ã‚¹B", due:"2025/07/05", status:"é€²è¡Œä¸­", st:"doing", assignees:["å·åŸ"]},
    {name:"ã‚ªãƒ¼ãƒ€ãƒ¼ï¼šåˆºç¹C", due:"2025/07/12", status:"å®Œäº†", st:"done", assignees:["è—¤åŸ","å·åŸ"]},
  ];

  function statusClass(st){
    if(st==="doing") return "st-doing";
    if(st==="wait")  return "st-wait";
    if(st==="done")  return "st-done";
    return "st-todo";
  }

  function renderRows(mount, rows){
    mount.innerHTML = rows.map(r=>`
      <tr class="row">
        <td>${r.name}</td>
        <td>${r.due}</td>
        <td><span class="status ${statusClass(r.st)}"><span class="dot"></span>${r.status}</span></td>
        <td style="text-align:right;">${r.assignees.join(" / ")}</td>
      </tr>
    `).join("");
  }

  renderRows(stockBody, stockRows);
  renderRows(orderBody, orderRows);
})();
</script>

</body>
</html>
